import asyncio
from mcp import Client

async def main():
    # Connexion au serveur MCP (remplace l'URL si n√©cessaire)
    client = await Client.connect("http://localhost:8000", model="traffic.simulation")

    print("‚úÖ Connect√© au serveur MCP")

    # Exemple : Ajouter un v√©hicule
    response = await client.send("add_vehicle", {
        "id": "red_01",
        "route": "route_1"
    })
    print("üöó Ajout v√©hicule:", response)

    # Exemple : Changer la vitesse du v√©hicule
    response = await client.send("change_speed", {
        "id": "red_01",
        "speed": 1.0
    })
    print("‚ö° Vitesse modifi√©e:", response)

    # Exemple : r√©cup√©rer l'√©tat du v√©hicule (si ton mod√®le le supporte)
    try:
        state = await client.send("get_vehicle_state", {
            "id": "red_01"
        })
        print("üìç √âtat v√©hicule:", state)
    except Exception as e:
        print("‚ÑπÔ∏è Impossible d'obtenir l'√©tat:", e)

    await client.close()
    print("‚ùå D√©connect√© du serveur MCP")

if __name__ == "__main__":
    asyncio.run(main())
